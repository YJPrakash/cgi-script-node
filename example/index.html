<!DOCTYPE html>
<html>

<head>
  <title>Welcome to Express!</title>
  <style>
    body {
      width: 35em;
      margin: 0 auto;
      font-family: Tahoma, Verdana, Arial, sans-serif;
    }
  </style>
</head>

<body>
  <h1>Welcome to Node CGI sample!</h1>

  <form id="lForm" action="/cgi-bin/hello.cgi" method="POST" onsubmit="formSubmit(event)">
    <div style="display: table;"></div>
    <div style="display:table-row;">
      <label for=uname style="display:table-cell;">Name:</label><input style="display:table-cell;" id=uname
        autocomplete=off name=uname type="text">
    </div>
    <div style="display:table-row;">
      <label for=pass style="display:table-cell;">Password:</label><input style="display:table-cell;" id=pass
        autocomplete=off name=pass type="password">
    </div>
    <div style="display:table-row;">
      <label for=attachment style="display:table-cell;">Attachements:</label><input style="display:table-cell;"
        id=attachment autocomplete=off name=attachment type="file" multiple>
    </div>
    <input type="submit" value="Submit">
  </form>
  <script type="text/javascript">
    let fetchJSON = (url, options) => {
      return fetch(url, options).then(res => {
        return res.json();
      });
    }

    function processData(res) {
      console.log(res);
    }

    function formSubmit(event) {
      event.preventDefault();
      let formData = new FormData(lForm);

      fetchJSON('/cgi-bin/hello.cgi', {
        method: "POST",
        contentType: "application/json",
        body: formData
      }).then(processData);
    }
  </script>

</body>

</html>
